import{C as m,o as p,n as u,k as s,w as l,q as i,v as d,D as f,E as h}from"./index-DnV_PQKh.js";import{_ as V}from"./index-VFRdjTNe.js";import{V as w}from"./VSheet-mZ3DjU5h.js";import{V as c}from"./VDialog-v7D7HLmZ.js";import{V as g}from"./VForm-DpeJQ2Gg.js";import{V as r}from"./VTextField-D2cK9aWE.js";import{a as n}from"./VBtn-97_1nVse.js";import{V as y}from"./VCard-BQTYTnJ2.js";import{V as k}from"./VOtpInput-JztRrSqu.js";import"./lazy-BfYUUKwA.js";import"./index-DeYzNrwg.js";import"./VInput-B8mRn_mU.js";import"./createSimpleFunctional-DRF6KMPf.js";import"./VAvatar-BSnJ42nl.js";import"./VImg-B0vl1Cj0.js";const v={data:()=>({iin:"",phone:"",code:"",dialog:!1,loading:!1,recovery:!1,password:"",password_confirm:"",show1:!1,show2:!1}),methods:{async registration(){try{await this.$store.dispatch("registration",{iin:this.iin,phone:this.phone,password:this.password,password_confirm:this.password_confirm}),this.$router.push("/main")}catch(e){console.error(e),alert("Данные введены неверно")}},async smsValidate(){this.loading=!0;try{const e=await m.post("client-sms-validate",{code:this.code,phone:this.phone});console.log("Res",e.data),e.data.success?this.registration():alert(e.data.message)}catch(e){console.error(e),alert("Что-то пошло не так")}finally{this.loading=!1,this.dialog=!1}},async smsSend(){try{const e=await m.post("client-sms-send",{iin:this.iin,phone:this.phone});console.log("Res",e.data),this.dialog=!0,alert(e.data.data)}catch(e){console.error(e),alert("Что-то пошло не так")}},async validate(){const{valid:e}=await this.$refs.form.validate();e&&this.smsSend()},reset(){this.$refs.form.reset()},resetValidation(){this.$refs.form.resetValidation()}}},C={class:"section__auth"},$={class:"d-flex flex-column"},b={class:"section__auth__modal"};function U(e,a,q,B,N,t){return p(),u("div",C,[s(w,{class:"mx-auto",width:"300"},{default:l(()=>[s(g,{ref:"form"},{default:l(()=>[s(r,{modelValue:e.iin,"onUpdate:modelValue":a[0]||(a[0]=o=>e.iin=o),variant:"outlined",counter:12,rules:[o=>!!o||"Введите ИИН",o=>o&&o.length<=12||"ИИН содержит только 12 цифр"],label:"ИИН",required:""},null,8,["modelValue","rules"]),s(r,{modelValue:e.phone,"onUpdate:modelValue":a[1]||(a[1]=o=>e.phone=o),variant:"outlined",counter:12,rules:[o=>!!o||"Введите телефон"],label:"Телефон",required:""},null,8,["modelValue","rules"]),s(r,{"append-icon":e.show1?"mdi-eye":"mdi-eye-off",type:e.show1?"text":"password",modelValue:e.password,"onUpdate:modelValue":a[2]||(a[2]=o=>e.password=o),variant:"outlined",rules:[o=>!!o||"Введите пароль"],label:"Введите новый пароль",required:"","onClick:append":a[3]||(a[3]=o=>e.show1=!e.show1)},null,8,["append-icon","type","modelValue","rules"]),s(r,{"append-icon":e.show2?"mdi-eye":"mdi-eye-off",type:e.show2?"text":"password",modelValue:e.password_confirm,"onUpdate:modelValue":a[4]||(a[4]=o=>e.password_confirm=o),variant:"outlined",rules:[o=>!!o||"Введите пароль",o=>o===e.password||"Пароли не совпадают"],label:"Повторный ввод",required:"","onClick:append":a[5]||(a[5]=o=>e.show2=!e.show2)},null,8,["append-icon","type","modelValue","rules"]),i("div",$,[s(n,{class:"mt-4",color:"grey-darken-4",block:"",onClick:t.validate},{default:l(()=>[d(" Зарегистрироваться ")]),_:1},8,["onClick"]),e.recovery?(p(),f(n,{key:0,class:"mt-4",color:"grey-darken-4",block:"",onClick:t.validate},{default:l(()=>[d(" Подтвердить ")]),_:1},8,["onClick"])):h("",!0),i("div",{class:"section__auth__link",onClick:a[6]||(a[6]=o=>e.$router.push("/login"))}," Логин ")])]),_:1},512)]),_:1}),s(c,{modelValue:e.dialog,"onUpdate:modelValue":a[8]||(a[8]=o=>e.dialog=o),width:"auto"},{default:l(()=>[s(y,null,{default:l(()=>[i("div",b,[s(k,{modelValue:e.code,"onUpdate:modelValue":a[7]||(a[7]=o=>e.code=o),loading:e.loading,length:"4",variant:"underlined"},null,8,["modelValue","loading"]),s(n,{disabled:e.code.length<4,class:"mt-4",color:"grey-darken-4",block:"",onClick:t.smsValidate},{default:l(()=>[d(" Подтвердить ")]),_:1},8,["disabled","onClick"])])]),_:1})]),_:1},8,["modelValue"])])}const L=V(v,[["render",U]]);export{L as default};
