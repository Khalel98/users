import{K as h,A as n,B as m,J as t,D as r,i as v,C as p,E as o,an as f,I}from"./index-B1G3lqf4.js";import{_ as g}from"./index-BOuR8vT-.js";import{V as E}from"./VChip-DJVO64o2.js";import{V as k}from"./VBtn-DJHBtDOp.js";import"./index-CETBrpnB.js";import"./VAvatar-C7vJ0bOy.js";const q={data(){return{selected:null,request:null,status:null,intervalId:null,approved:[],message:null,redirect_url:null}},watch:{status(e){e==="ISSUED"&&clearInterval(this.intervalId)}},mounted(){this.requestInfo(),this.requestResult(),this.intervalId=setInterval(()=>{this.requestResult()},5e3)},beforeUnMounted(){clearInterval(this.intervalId)},computed:{approvedItem(){return this.approved.find(e=>e.id===parseInt(this.selected))},statusWord(){switch(this.status){case"PROCESSING":return"в процессе";case"APPROVED":return"предварительно одобрено";case"REJECTED":return"отклонено";case"FAILED":return"ошибка запроса";case"ISSUED":return"одобрена";default:return"Неизвестный статус"}},statusFill(){switch(this.status){case"PROCESSING":return"#03A9F4";case"APPROVED":return"#FFC107";case"REJECTED":return"#C62828";case"FAILED":return"#C62828";case"ISSUED":return"#4CAF50";default:return"#212121"}}},methods:{async requestInfo(){try{const e=await h.get(`client-scoring-info/${this.$route.params.id}`);console.log("Res",e.data.data),this.request=e.data.data}catch(e){console.error(e),alert("Что-то пошло не так")}},async requestResult(){try{const e=await h.get(`client-check-status-scoring/${this.$route.params.id}`);console.log("Res",e.data),this.status=e.data.status,e.data.redirect_url&&(this.redirect_url=e.data.redirect_url)}catch(e){console.error(e)}}}},b={class:"section__cart"},C={class:"section__cart__item"},D={class:"section__cart__item__title",style:{border:"none","margin-bottom":"0","padding-bottom":"0"}},R={key:0},S={class:"section__cart__item"},F=t("h2",{class:"section__cart__item__title"},"Детали заявки",-1),V={class:"section__cart__item__block"},y=t("span",null,"Номер телефона",-1),A={class:"section__cart__item__block"},w=t("span",null,"ИИН",-1),x={class:"section__cart__item__block"},B=t("span",null,"Магазин",-1),N={class:"section__cart__item__block"},P=t("span",null,"Срок кредита",-1),O={class:"section__cart__item"},U={class:"section__cart__item__block"},J=t("span",null,"Время создания",-1),T={class:"section__cart__item__block"},G=t("span",null,"Время последнего изменения",-1),L=["href"];function W(e,K,M,j,s,c){var a,_,i,l,u,d;return n(),m("div",b,[t("div",C,[t("h2",D,[r(" Статус "),v(E,{color:c.statusFill,variant:"elevated"},{default:p(()=>[r(o(c.statusWord),1)]),_:1},8,["color"])]),s.message?(n(),m("p",R,"Сообщение: "+o(s.message),1)):f("",!0)]),t("div",S,[F,t("div",V,[y,r(),t("strong",null,o((a=s.request)==null?void 0:a.iin),1)]),t("div",A,[w,r(),t("strong",null,o((_=s.request)==null?void 0:_.phone),1)]),t("div",x,[B,r(),t("strong",null,o((i=s.request)==null?void 0:i.filial_name),1)]),t("div",N,[P,r(),t("strong",null,o((l=s.request)==null?void 0:l.period)+" мес",1)])]),t("div",O,[t("div",U,[J,r(),t("strong",null,o((u=s.request)==null?void 0:u.created_at),1)]),t("div",T,[G,t("strong",null,o((d=s.request)==null?void 0:d.updated_at),1)])]),t("a",{href:s.redirect_url,target:"_blank",style:{"text-decoration":"none"}},[s.redirect_url?(n(),I(k,{key:0,color:"#FFED00",block:""},{default:p(()=>[r(" Пройти верификацию ")]),_:1})):f("",!0)],8,L)])}const $=g(q,[["render",W]]);export{$ as default};
